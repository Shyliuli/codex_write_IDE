# Rustic C++ IDE 对标 Dev‑C++ 迭代计划

本文件记录 Rustic C++ IDE 从当前“工程 + clangd AST/LSP + 基础编译”版本，逐步对标 Dev‑C++ 的功能缺口与实现顺序。每一项做完后会在后续迭代中标注完成状态。

> 现状已具备：
> - 单/多文件工程模型（`.rcppide.json`）
> - F9 一键编译、Ctrl+F10 运行、Makefile 生成
> - rustic.hpp 一键拉取与 include 配置
> - clangd AST 诊断 + 自动补全（Tab 接受补全）
> - 行号、基础语法高亮、输出面板、项目文件树

---

## Phase 1：编辑器体验对标（最常用）

1. **自动补全细化**（✅ 已完成）
   - 触发策略优化：只在合适的上下文弹出（如 `.` / `::` / `->` 后强触发、注释/字符串内不触发）
   - 支持补全项的 kind 图标、排序、过滤
2. **多标签/多文件编辑**（✅ 已完成）
   - 参考 Dev‑C++ 的“多 Unit 标签页”
   - 关闭/保存提示、最近文件列表
3. **代码折叠与结构化导航**（✅ 已完成）
   - 基于 clangd 的 AST 语义块折叠（函数/类/命名空间/宏）
4. **括号/关键字匹配与自动缩进**（✅ 已完成）
   - `{}` `()` `[]` 高亮匹配
   - 代码块自动缩进、Tab/Shift+Tab 控制缩进
5. **查找/替换 + 全工程搜索**（✅ 已完成）
   - 单文件查找/替换
   - “Find in Files” 式全工程搜索结果面板

---

## Phase 2：语义能力对标（依赖 clangd）

6. **语义高亮（semanticTokens）**（✅ 已完成）
   - 取代目前正则高亮的“深度模式”，并保留 rustic 关键词特殊配色
7. **跳转/回退（Goto Definition/Declaration）**（✅ 已完成）
   - Ctrl+点击跳转定义
   - 导航历史栈（前进/后退）
8. **查找引用/符号列表**（✅ 已完成）
   - Find References
   - 文档/工程符号树（函数、类、trait/impl 展开后的结构）
9. **重命名重构（Rename Symbol）**（✅ 已完成）
   - 基于 clangd 的 rename
   - 自动更新所有引用

---

## Phase 3：工程与构建系统对标

10. **工程配置 UI**（✅ 已完成）
    - GUI 配置编译器、标准、include、宏定义、链接库
    - Debug/Release 两套配置
11. **多目标/多文件夹工程结构**（✅ 已完成）
    - 工程内分组（类似 Dev‑C++ 的“Groups”）
    - 支持子目录、资源文件
12. **增量编译/重建/清理**（✅ 已完成）
    - Build / Rebuild / Clean 三键
    - 解析 Makefile/compile_commands 与工程配置同步
13. **自定义工具链/外部工具**（✅ 已完成）
    - 配置外部命令（格式化、静态分析、脚本）
    - 输出重定向到 IDE 面板

---

## Phase 4：调试与运行对标

14. **GDB 调试前端**（✅ 已完成）
    - 断点、单步、继续、调用栈、局部变量/监视
    - 调试输出与程序输出分离
15. **运行参数与工作目录配置**（✅ 已完成）
    - 运行时 argv、环境变量、cwd
    - 多运行配置

---

## Phase 5：易用性与外观

16. **新建工程/文件向导**（✅ 已完成）
    - Console App / GUI App / 静态库 / 动态库 模板
    - rustic.hpp 模板项目
17. **主题与配色方案**（✅ 已完成）
    - Dev‑C++ 风格浅色默认主题
    - 可切换深色主题
18. **快捷键与布局保存**（✅ 已完成）
    - 自定义快捷键
    - Dock/窗口布局持久化

---

## Phase 6：后续增强（对标 VSCode 级调试体验）

> 下面这些是目前版本还存在的小限制/缺口，对应你提到的“调试要像 VSCode 一样好用”。

19. **GDB‑MI 结构化解析与稳定性增强**（✅ 已完成）
    - 已实现 MI tokenizer/递归解析器，替换旧正则方案。
    - Breakpoints/Stack/Locals/Threads/表达式求值均走统一解析，兼容更多 gdb 输出。
20. **监视/表达式 Watch 窗格**（✅ 已完成）
    - 监视 Tab 支持添加/删除表达式。
    - 每次暂停后自动刷新，并对变化值做高亮提示。
21. **高级断点管理**（✅ 已完成）
    - 断点面板右键支持：启用/禁用、删除、条件、命中次数、日志断点。
22. **线程/栈/变量视图进一步完善**（✅ 已完成）
    - 线程列表可切换线程；调用栈列表可切换帧。
    - 暂停时自动刷新线程/栈/局部变量/监视表达式。
23. **调试配置与会话控制**（✅ 已完成）
    - 支持“编译并调试(Ctrl+F5)”与“重新启动调试(Ctrl+Shift+F5)”。
    - 断点命中后自动定位并高亮当前执行行。
24. **高亮配色方案可定制**（✅ 已完成）
    - 语法高亮支持导入/导出 JSON 配色方案。
    - 配色会保存到 Settings 并对所有标签页即时生效。
25. **内置终端界面**（✅ 已完成）
    - 底部 Dock 终端，自动探测并启动 bash/zsh/powershell（按平台）。
    - 支持在工程根目录下执行命令，输出与输入均在 IDE 内完成。

---

## 当前迭代执行顺序

Phase 1‑6 已全部完成；后续可按需继续做更深层调试 UI（变量树、反汇编等）或代码格式化/静态分析等增强。
